'use strict';

function raw (moment, date, format) {
  if (typeof date === 'string') {
    return moment(date, format);
  }
  if (Object.prototype.toString.call(date) === '[object Date]') {
    return moment(date);
  }
  if (moment.isMoment(date)) {
    return date;
  }
}

function parse (moment, date, format) {
  var m = raw(moment, date, format);
  return m && m.isValid() ? m : null;
}

module.exports = parse;
